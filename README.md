## Stocks_Monitor
Мониторинг акций.  
Программа с помощью Tinkoff API получает список акций и информацию по ним.  
После чего формирует отчет в .csv формате в виде:
| Название компании | Тикер         | Валюта котировки  | Дата и время котировки  | Текущая котировка  | 
| ----------------- |:-------------:|:-----------------:|:-----------------------:| -----------------: |
| Ubiquiti Inc      | UI            |   USD             |   16.2.2022 19:00       |   13.8             |
| Cerner            | CERN          |   USD             |   16.2.2022 15:00       |   42.93            |
| Fix Price Group   | FIXP          |   RUB             |   14.2.2022 04:00       |   467.5            |

## Какая задача стояла
Заказчику нужны данные по акциям в виде таблицы такого вида, которые он мог бы получать при запуске программы. Данные в таблице должны быть актуальными.
![image](https://user-images.githubusercontent.com/99877154/154850992-f9b3bece-0052-4479-8fef-5153e343a85a.png)

## Установка  
  Проект работает "из коробки", всё что нужно сделать — поместить token Tinkoff Invest API в Parameters в классе main.   
  Получить token Tinkoff Invest API можно по ссылке: https://www.tinkoff.ru/invest/settings/api/ (аутентификация обязательна)
## Принцип работы  
  1. Прописываем токен в параметре класса Parameters
  2. С помощью класса ApiConnector и передачи ему параметров из класса Parameters осуществляются все следующие подключения
  3. Все методы по вызову отчетов находятся в классе ContextProvider
  4. Используя форму отчетов - класс Report Form, формируются отчеты по:    
    1. Всем акциям  
    2. Всем именам FIGI  
  5. Используя класс AllCandlesReport и отчет FIGI формируем отчеты по ценам закрытия и датам\времи котировки  
    (При получении цен закрытия по каждому из FIGI установлен timeout в 75МС во избежания отключения от сервера банка)
  6. Сравнивания FIGI в отчете по всем акциям allStocks и allPrices формируем финальный отчет
 ## TODO:
  1. Представить итоговый отчет в виде XML-страницы
  2. Сохранять OLAP в базу данных PostgreSQL и из неё формировать итоговый отчет
